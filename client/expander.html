<template name="expander">
	<div class="expander">
		<h3>Viewer</h3>
		<div>parent: <a href="/expanders/{{parent}}">{{parent}}</a></div>
		<button class="highlight-all-fragments">
			Highlight All Fragments
		</button>
		<!--TODO make edit/view-mode separate templates?-->
		<div class="edit-mode {{show editMode}}">
			<button class="save">Save</button>
			<button class="cancel">Cancel</button>
			<textarea class="plain content-input">{{content}}</textarea>
		</div>
		<div class="view-mode {{hide editMode}}">
			<button class="edit {{hide editMode}}">Edit</button>
			<div class="content rendered  {{hide selectMode}}">
				<!-- important to have the pre tags wrapped tightly around the content b/c
					whitespace will get displayed-->
				<pre>{{{renderContent}}}</pre>
			</div>
			<div class="content plain {{show selectMode}}">
				<!-- important to have the pre tags wrapped tightly around the content b/c
					whitespace will get displayed-->
				<pre>{{content}}</pre>
			</div>
			<div>
				<ul>
					{{#each fragments}}
					<li><a href="/expanders/{{id}}">{{id}}</a></li>
					{{/each}}
				</ul>
			</div>
			<div>
				{{> fragmentsViewer this}}
			</div>
		</div>
	</div>
</template>
