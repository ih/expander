<head>
  <title>Expander</title>
</head>

<body>
  {{> page}}
</body>

<template name="page">
  {{> expanderKeys}}
  <!-- TODO (irvin) temporary;  make expander key an url parameter -->
  {{> expanderSelector}}
  {{> expanderViewer}}
  
  {{> expanderCreator fragmentData}}
</template>


<template name="expanderKeys">
<div class="expander-keys">	
  Expander Keys:
  {{#each getAllExpanders}}
  <div>{{_id}}</div>
  {{/each}}
</div>
</template>

<template name="expanderSelector">
<div>
  <input></input>
  <button>Submit</button>
</div>
</template>

<!-- TODO (irvin) pass argument to template instead of using "global" 
     session variable? -->
<template name="expanderViewer">
  {{> expander selectedExpander}}
</template>

<template name="expander">
<div class="expander">
  <h1>View expander</h1>
  <div>parent: {{parent}}</div>
  <button class="highlight-all-fragments">
    Highlight All Fragments
  </button>
  <div class="content rendered  {{hide selectMode}}">
    {{{renderContent}}}
  </div>
  <div class="content plain {{show selectMode}}">{{content}}</div>
  <div>
    <h3>fragment keys</h3>
    <ul>
    {{#each fragments}}
    <li>{{id}}</li>
    {{/each}}
    </ul>
  </div>
  {{> fragmentsViewer this}}
  <div></div>
</div>
</template>

<!-- preview possible expansions for the currently viewed expander 
     based on where the mouse is hovering -->
<template name="fragmentsViewer">
  <h2>Fragments Viewer</h2>
  {{#each getHighlightedExpanders}}
  <!-- TODO change view expander and use it here-->
  <div class="fragment {{this._id}}">
    {{> expander}}
  </div>
  {{/each}}
</template>

<template name="expanderCreator">
	<h1>Create a new expander</h1>
	<div class="fragment">{{selectionString}}</div>
        <div>border: ({{border.open}}, {{border.close}})</div>
        
        <label>
          New Content
          <textarea class="new-content"></textarea>
        </label>
        <button>Submit</button>
</template>
